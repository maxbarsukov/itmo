# Проектирование вычислительных систем

## Контрольная работа по темам лабораторных работ

<img alt="akira-kaneda" src="https://github.com/maxbarsukov/itmo/blob/master/.docs/akira-kaneda.gif" height="300">

> [!TIP]
> Ответы должны быть краткими (не более 1000-1500 символов).

Если у вас есть сомнения в том, что вы правильно понимаете вопрос, следует отвечать так, как вам кажется правильным. В ответе можно описать, как именно вы поняли вопрос.

---

## Вопросы

> [!CAUTION]
> Написанные здесь ответы получили балл **.../...**, то есть **не все ответы правильные**, используйте на своё усмотрение.

#### Вопрос 1. Перечислите основные функциональные компоненты стенда SDK-1.1M и кратко опишите функции, выполняемые каждым элементом.

Процессорный модуль (типа STM32F427) - центральный вычислитель, исполняет код и управляет периферией. OLED-дисплей 128x64 с контроллером SSD1306 по I2C - для вывода текста и графики. Матричная клавиатура 3x4 - 12 кнопок, подключена через расширитель портов PCA9538 по I2C. Звуковой излучатель (динамик) на PE9 - управляется ШИМ от таймера для генерации звука. Светодиоды: зеленый на PD13, двухцветный (красный/желтый) на PD14 и PD15 - индикация состояния. Кнопка RESET - аппаратный сброс микроконтроллера. Отладочный USB-порт (программатор) - загрузка прошивки и обмен данными по UART (виртуальный COM-порт). Слоты расширения: Arduino-совместимые и SDK-X - для подключения внешних модулей (датчики, исполнительные устройства). Блок питания: питание от USB (5В) или внешнего источника 9-36В

#### Вопрос 2. Перечислите основные программные и аппаратные компоненты, которые участвуют в передаче данных по интерфейсу UART в режиме прерываний с прикладного уровня программы стенда SDK-1.1M в терминальную программу (например, PuTTY) на компьютере и обратно. Кратко опишите роль этих компонентов в передаче данных.

Со стороны стенда: аппаратный блок USART (допустим, USART6) - он генерирует последовательный сигнал. Физические пины микроконтроллера (PC6/TX, PC7/RX) - через них сигнал уходит и приходит. Встроенный отладчик-программатор - конвертирует UART-сигналы в USB-пакеты. На уровне ПО: драйвер HAL с функциями типа `HAL_UART_Transmit_IT()` / `Receive_IT()` - запускает обмен в фоне. Структура `UART_HandleTypeDef` (huart6) - хранит текущее состояние драйвера. Обработчик прерывания `USART6_IRQHandler` - вызывается железом по событиям (отправлено/принято). Callback'и `HAL_UART_TxCpltCallback()` / `RxCpltCallback()` - тут пользовательский код реагирует на завершение операций. Программные FIFO-буферы - буферизируют данные, чтобы не терялись между прерываниями и главным циклом. Со стороны ПК: драйвер, создающий виртуальный COM-порт при подключении USB. Терминальная программа (PuTTY) - открывает порт с настройками (115200 бод, 8N1) и обеспечивает интерфейс для ввода/вывода. Программа на STM32 через HAL инициирует передачу, USART аппаратно выдает биты, программатор конвертирует в USB, на ПК драйвер создает COM-порт, PuTTY с ним работает. Прием аналогичен, но прерывание срабатывает на событие приема байта

#### Вопрос 3. Перечислите основные программные и аппаратные компоненты, которые участвуют в получении кодов кнопок, нажатых на матричной клавиатуре стенда SDK-1.1M, прикладным уровнем программы стенда. Кратко опишите роль этих компонентов в процессе получения кодов нажатых кнопок.

Контроллер I2C1 в STM32 (пины PB8, PB9) это мастер на шине. К нему по I2C подключен расширитель портов PCA9538 с адресом `0xE2`. К выходам этого расширителя P0-P3 и P4-P6 подключена сама матричная клавиатура 3x4, строки и столбцы соответственно. Низкоуровневый драйвер использует функции HAL типа `HAL_I2C_Mem_Write`/`Read` для общения с регистрами PCA9538. Алгоритм сканирования построчно выставляет ноль на одну строку через выходной порт и читает состояние столбцов через входной порт, определяя позицию кнопки. Для периодичности и антидребезга обычно задействуется аппаратный таймер, его прерывание запускает цикл сканирования. Полученные коды событий складываются в программную FIFO-очередь. Прикладной уровень уже просто забирает готовые коды из этой очереди, вся работа с I2C, таймером и обработкой дребезга инкапсулирована на нижнем уровне

---

## Полезные ссылки

| Ссылка | Описание |
| --- | --- |
| [прочее/SDK-1.1M_24110601.pdf](../../прочее/SDK-1.1M_24110601.pdf) | Методичка по стенду SDK-1.1M |

## Лицензия <a name="license"></a>

Проект доступен с открытым исходным кодом на условиях [Лицензии GNU GPL 3](https://opensource.org/license/gpl-3-0/). \
*Авторские права 2025 Max Barsukov*

**Поставьте звезду :star:, если вы нашли этот проект полезным.**
