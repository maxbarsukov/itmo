# Лабораторная работа №4

<img alt="yutaro-kuruse" src="https://github.com/maxbarsukov/itmo/blob/master/.docs/yutaro-kuruse.gif" height="300">

> [!TIP]
> What the fuck is «функционал»?

|.pdf|.docx|
|-|-|
| [report](./docs/report.pdf) | [report](./docs/report.docx) |

---

## Задание

**«Анализ уязвимостей веб-приложения с помощью OWASP ZAP»**

**Назначение:** освоить базовые навыки динамического тестирования безопасности (DAST) на примере тестового приложения.

1. Установите OWASP ZAP (бесплатный инструмент).
2. Запустите встроенный браузер ZAP и перейдите на тестовый сайт (например, [testphp.vulnweb.com](http://testphp.vulnweb.com/)).
3. Проведите "Быстрое сканирование" (Quick Scan) сайта.
4. Проанализируйте результаты сканирования: найдите 3-5 различных типов уязвимостей (например, XSS, SQLi).
5. Сделайте скриншоты найденных уязвимостей и кратко опишите суть каждой.

### Что сдают студенты

Краткий отчет (в 2-3 стр.) со скриншотами и описанием уязвимостей.

### Критерии оценки

- **3 балла**: Корректное выполнение сканирования.
- **5 баллов**: Найдено и корректно классифицировано не менее 3 уязвимостей.
- **2 балла**: Качество оформления отчета (четкость, структурированность, наличие скриншотов).

## Контрольные вопросы

1. Чем динамическое тестирование (DAST) отличается от статического (SAST)?
2. Какие последствия может иметь уязвимость Cross-Site Scripting (XSS) для пользователя сайта?
3. Почему для тестирования нельзя использовать реальные коммерческие сайты?

### Ответы на контрольные вопросы

#### 1. Чем динамическое тестирование (DAST) отличается от статического (SAST)?

**DAST (Dynamic Application Security Testing)** и **SAST (Static Application Security Testing)** — это два подхода к тестированию безопасности приложений, которые принципиально отличаются по времени проведения, объекту анализа и методу.

| Критерий | **DAST** | **SAST** |
| :--- | :--- | :--- |
| **Время проведения** | Тестирование работающего приложения (на этапе тестирования или в рантайме). | Анализ исходного кода, байт-кода или бинарных файлов до запуска приложения (на этапе разработки). |
| **Объект анализа** | Работающее приложение "снаружи" (black-box). Анализируются HTTP-запросы и ответы, поведение приложения. | Исходный код или скомпилированные артефакты "изнутри" (white-box). |
| **Найденные уязвимости** | Обнаруживает runtime-проблемы: XSS, SQLi, CSRF, проблемы аутентификации и авторизации, misconfiguration сервера. | Обнаруживает flaws в коде: SQL-инъекции, XSS, ошибки буфера, утечки памяти, проблемы с валидацией входных данных. |
| **Основное преимущество** | Не зависит от языка программирования. Находит уязвимости, проявляющиеся только в работающей системе. | Находит дефекты на ранних стадиях (Shift Left), что дешевле и быстрее для исправления. Указывает точное место в коде. |
| **Основной недостаток** | Не указывает на точное место ошибки в коде. Проводится на поздних стадиях. Может пропускать логические уязвимости. | Может выдавать ложные срабатывания (false positives). Зависит от языка и фреймворка. Не находит проблем, связанных с конфигурацией среды. |

**Ключевое отличие:** DAST тестирует приложение извне, в процессе его работы, имитируя действия злоумышленника, а SAST анализирует код изнутри, не запуская его.

#### 2. Какие последствия может иметь уязвимость Cross-Site Scripting (XSS) для пользователя сайта?

Уязвимость Cross-Site Scripting (XSS) позволяет злоумышленнику внедрить и выполнить вредоносный JavaScript-код в контексте браузера жертвы (пользователя уязвимого сайта). Последствия для пользователя могут быть крайне серьезными:

1.  **Кража учетных данных и куки-файлов:** Злоумышленник может украсть cookie сессии пользователя, что позволяет ему войти в аккаунт жертвы без логина и пароля (угон сессии).
2.  **Кража конфиденциальных данных:** Вредоносный скрипт может перехватить и отправить злоумышленнику любые данные, которые видит или вводит пользователь на странице: логины, пароли, банковские реквизиты, персональную информацию.
3.  **Подмена содержимого (Defacement):** Скрипт может изменить внешний вид или содержимое страницы, чтобы обмануть пользователя, например, показать фальшивую форму ввода пароля.
4.  **Кейлоггинг:** Скрипт может отслеживать и перехватывать все нажатия клавиш пользователя на зараженной странице.
5.  **Перенаправление на фишинговые или вредоносные сайты:** Пользователь может быть автоматически перенаправлен на сайт, созданный для мошенничества или распространения malware.
6.  **Выполнение действий от имени пользователя:** Если пользователь аутентифицирован, скрипт может от его имени совершать любые действия на сайте: публиковать сообщения, изменять настройки профиля, совершать финансовые операции (если уязвима страница перевода денег).

Таким образом, XSS-атака напрямую нарушает конфиденциальность, целостность и безопасность данных пользователя.

#### 3. Почему для тестирования нельзя использовать реальные коммерческие сайты?

Использование инструментов для тестирования на проникновение, таких как OWASP ZAP, против реальных коммерческих сайтов без явного разрешения их владельцев **строго запрещено и является незаконным** по нескольким ключевым причинам:

1.  **Незаконность:** Такие действия подпадают под статьи Уголовного кодекса РФ (например, ст. 272 "Неправомерный доступ к компьютерной информации") и аналогичные законы в других странах. Это киберпреступление, даже если цель — обучение.
2.  **Нарушение соглашений:** Большинство сайтов имеют Terms of Service (Пользовательское соглашение), которое прямо запрещает проведение любых форм сканирования уязвимостей и атак.
3.  **Риск причинения вреда:**
    *   **Отказ в обслуживании (DoS):** Активное сканирование создает высокую нагрузку на сервер и может привести к его замедлению или полному отказу, что нанесет финансовый ущерб бизнесу.
    *   **Повреждение данных:** Автоматизированные тесты (например, SQL-инъекции) могут случайно изменить или удалить критически важные данные в базе данных.
4.  **Юридические последствия:** Владелец сайта может зафиксировать попытку взлома, определить IP-адрес сканирования и инициировать судебное разбирательство против исполнителя или его организации/университета.
5.  **Этические соображения:** Проводить тестирование безопасности без разрешения — это неэтично. Это вторжение в частную собственность.

**Правильный подход:** Для обучения и тестирования необходимо использовать специально предназначенные для этого **тестовые полигоны** (как `http://testphp.vulnweb.com`), развертывать собственные уязвимые приложения (например, OWASP Juice Shop, DVWA, bWAPP) или получать **письменное разрешение** на тестирование от владельца веб-ресурса (например, в рамках программ Bug Bounty).

---

## Полезные ссылки

| Ссылка | Описание |
| --- | --- |
| [www.zaproxy.org/docs/](https://www.zaproxy.org/docs/) | Официальная документация OWASP ZAP |
| [testphp.vulnweb.com](http://testphp.vulnweb.com/) | Тестовый сайт |
| [owasp.org/www-project-top-ten/](https://owasp.org/www-project-top-ten/) | OWASP Top 10: Краткое описание уязвимостей |
| [owasp.org/.../OWASPDorset-ZAP-DanielW.pdf](https://owasp.org/www-chapter-dorset/assets/presentations/2020-01/20200120-OWASPDorset-ZAP-DanielW.pdf) | Презентация Zed Attack Proxy (ZAP) |
| [www.zaproxy.org/blog/2020-05-15-dynamic-application-...](https://www.zaproxy.org/blog/2020-05-15-dynamic-application-security-testing-with-zap-and-github-actions/) | Dynamic Application Security Testing with ZAP and GitHub Actions |
| [habr.com/articles/709586/](https://habr.com/ru/companies/first/articles/709586/) | Обзор OWASP ZAP. Сканер для поиска уязвимостей в веб-приложениях |

## Лицензия <a name="license"></a>

Проект доступен с открытым исходным кодом на условиях [Лицензии MIT](https://opensource.org/licenses/MIT). \
*Авторские права 2025 Max Barsukov*

**Поставьте звезду :star:, если вы нашли этот проект полезным.**
