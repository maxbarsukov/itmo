# Задания

## Задание 1

Изучите файл [heap-0.c](./task1/heap-0.c) и реализуйте в нём недостающие функции для резервирования 
блока и для возвращения блока в пул доступных. Почему `block_id` содержит ссылку на `struct heap`?

[task1](./task1/)


## Задание 2

Модифицируйте аллокатор так, чтобы он умел выделять несколько блоков подряд.
См. файл [heap-1.c](./task2/heap-1.c).
У блоков теперь будет статус с большей гранулярностью, нежели “занят — не занят”.
Придумайте тесты для вашего кода для проверки всех особых случаев.

[task2](./task2/)


## Задание 3 (Вариант 2)

Второй вариант задания - это реализация несложной структуры данных как абстрагированного модуля с непрозрачным типом. Ему посвящена эта заметка.

У вас есть код внутри одной функции `main`, который реализует расширяемый массив (вектор).
Изучите его.

Ваша задача — выделить из этого кода как минимум модуль с реализацией вектора, снабжённый заголовочным файлом.

- Вектор должен быть реализован как [непрозрачная структура данных](https://stepik.org/lesson/408352/step/6).
- Доступ к его элементам должен быть контролируем и осуществляться через `getter` и `setter`.
- Постарайтесь максимально переиспользовать код и ничего не дублировать.
- Вывод вектора реализуйте как отдельную функцию, которая принимает `FILE*`, в который нужно вывести его содержимое. Эту функцию можно также разбить на функцию `foreach` и принтер одного элемента.
- Стремитесь сделать настолько маленькие функции, насколько возможно.

Ваша реализацяия как минимум должна позволять:

- Получить доступ к любому элементу.
- Получить информацию о текущей длинне массива и количестве выделенной памяти.
- Добавить элемент в конец массива.
- Добавить другой массив в конец массива (скопировать данные).
- Изменить размер массива на заданный (при необхоимости выделить память).
- Изменить размер массива на меньший с освобождением неиспользуемой памяти.
- Освободить память.
- Вывести массив в указанный поток вывода.

В результате должна получиться программа из нескольких файлов, которая делает то же самое, но в которой `main` содержит только заполнение вектора числами и вызов функции, печатающей его в `stdout`.

[task3](./task3/)


### Вопрос

Прочитайте раздел `man malloc` про функцию `realloc`.

```c
void *realloc(
   void *memblock,
   size_t size
);
```

- `memblock`: Указатель на ранее выделенный блок памяти.
- `size`: Новый размер в байтах.

Функция `realloc()` изменяет величину выделенной памяти, на которую указывает `ptr`, на новую величину, задаваемую параметром `newsize`. Величина `newsize` задается в байтах и может быть больше или меньше оригинала. Возвращается указатель на блок памяти, поскольку может возникнуть необходимость переместить блок при возрастании его размера. В таком случае содержимое ста­рого блока копируется в новый блок и информация не теряется.

Если свободной памяти недостаточно для выделения в куче блока размером `newsize`, то возвра­щается нулевой указатель.
