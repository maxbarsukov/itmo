# Рубежный контроль 1

<img alt="kakegurui" src="https://github.com/maxbarsukov/itmo/blob/master/.docs/kakegurui.gif" height="200">

Результаты первой рубежки (содержит **ответы** всех студентов, **правильные ответы** помечены ${\color{green}зелёным}$):

- [Вариант 1](./RK1%20Var%201.xlsx);
- [Вариант 2](./RK1%20Var%202.xlsx)

## Вариант `2`

### 1. В чем отличие синхронных от асинхронных аппаратных интерфейсов? Перечислите преимущества и недостатки каждого типа.

Синхронные интерфейсы:

- Используют тактовый сигнал (clock) для синхронизации передачи данных. Имеют отдельную линию синхронизации (например, SCL в I2C, SCK в SPI). Данные фиксируются на приемной стороне по фронту тактового сигнала.
- Примеры: SPI, I2C.
- Преимущества:
    - Высокая скорость передачи данных.
    - Простота реализации (данные передаются строго по тактам).
    - Подходит для высокопроизводительных систем.
- Недостатки:
    - Требует дополнительной линии для тактового сигнала.
    - Менее гибкий в плане расстояния (ограничен длиной синхросигнала).
    - Зависимость от стабильности тактового сигнала.

Асинхронные интерфейсы:

- Не используют общий тактовый сигнал. Синхронизация осуществляется через стартовые и стоповые биты. Приемник и передатчик должны быть предварительно настроены на одинаковую скорость.
- Примеры: RS-232, UART.
- Преимущества:
    - Простота подключения (минимум линий: TX, RX, GND).
    - Подходит для передачи на большие расстояния.
    - Гибкость в настройке скорости (бодрейт).
- Недостатки:
    - Ниже скорость передачи по сравнению с синхронными интерфейсами.
    - Требует согласования параметров (скорость, биты данных, стоп-биты).
    - Менее эффективен для высокоскоростных систем.

Итоговое сравнение:

| Параметр | Синхронные интерфейсы | Асинхронные интерфейсы |
| --- | --- | --- |
| Синхронизация | Тактовый сигнал (clock) | Старт/стоп биты |
| Скорость передачи | Высокая | Ниже |
| Количество линий | Больше (например, SPI: 4) | Меньше (например, UART: 2) |
| Расстояние передачи | Ограничено | Больше |
| Сложность реализации | Проще | Сложнее (настройка параметров) |
| Примеры | SPI, I2C | RS-232, UART |

---

### 2. Поясните, что подразумевается под асинхронным обменом между процессором и периферийным устройством? Перечислите и опишите виды асинхронного обмена.

Асинхронный обмен - готовность обоих устройств может произойти в любое время.

Существует 2 вида асинхронного обмена:

- По опросу готовности устройства. Здесь мы должны самостоятельно смотреть за состоянием переферийного устройства.
- По прерыванию от устройства. Здесь мы в конце исполнения каждый инструкции смотрим на наличие поступивших в систему прерываний, а устройство обязано в свою очередь по готовности сгенерировать этот самый запрос на прерывание.

---

### 3. Какой порт вывода имеет самую простую схему управления? Ответ поясните. Какие недостатки имеет данный порт вывода?

Самой простой схемой управления обладает однонаправленный порт вывода с открытым выходом с открытым коллектором/стоком (Open Drain/Open Collector).

Причины:

1. Минимальная схема управления:
   - Состоит из одного транзистора (NPN/PMOS или NMOS), который либо подключает выход к земле (логический «0»), либо находится в высокоимпедансном состоянии (логическая «1»).  
   - Для работы требуется только один регистр управления (бит данных).  
   - Пример: порт с открытым стоком на слайде 32 лекции, где выход управляется через транзистор, а внешний резистор выполняет функцию подтяжки.

2. Отсутствие сложных выходных каскадов:
   - Нет комплементарных транзисторов (как в двухтактной схеме), что упрощает конструкцию.

Недостатки:

1. Малый выходной ток: Ток через выход ограничен внешним нагрузочным резистором. Например, при сопротивлении 10 кОм и напряжении 5 В ток составит всего 0.5 мА, что недостаточно для управления мощными нагрузками (например, реле или светодиодами без усилителей).

2. Необходимость внешней нагрузки: Требуется подключение внешнего подтягивающего резистора к питанию, что усложняет разводку платы и увеличивает количество компонентов.

3. Ограниченная скорость переключения: Из-за RC-цепи (резистор + паразитная емкость) время нарастания сигнала увеличивается, что снижает максимальную частоту работы.

4. Односторонняя передача: Порт может только «тянуть» выход к земле, но не может активно устанавливать высокий уровень. Это ограничивает применение в высокоскоростных интерфейсах.

Примеры применения:

- Шина I2C (использует открытый сток для реализации монтажного И).  
- Управление светодиодами через ограничивающий резистор.  
- Сигналы прерываний в микроконтроллерах.

Сравнение с другими портами:

| Тип порта                  | Сложность схемы | Нагрузочная способность | Необходимость внешних компонентов |
|----------------------------|-----------------|-------------------------|-----------------------------------|
| **Открытый коллектор/сток** | Минимальная     | Низкая                  | Да (резистор)                    |
| **Двухтактный выход**       | Высокая         | Высокая                 | Нет                              |
| **Однотактный с нагрузкой** | Средняя         | Средняя                 | Нет (встроенный резистор)         |

---

### 4. В чем преимущество двухтактного выходного порта по сравнению с однотактным с внутренней нагрузкой?

Преимущества двухтактного выходного порта:

- Высокая нагрузочная способность (большой выходной ток).
- Возможность управлять мощной нагрузкой: светодиодами, реле, мощными электронными ключами (транзисторами, тиристорами).
- Может как "втекать", так и "вытекать" ток, обеспечивая более быстрое переключение емкостной нагрузки.
- В отличие от однотактного порта с внутренней нагрузкой, двухтактный порт не ограничен внутренним резистором, что делает его более универсальным.

---

### 5. Какой тип выходного порта используется для подключения ведущего (мастера) устройства к линии синхронизации интерфейса SPI? Ответ поясните.

Для подключения ведущего устройства к линии синхронизации интерфейса SPI используется двунаправленный порт с комплементарным выходным каскадом (двухтактная схема). Этот порт позволяет ведущему устройству управлять линией синхронизации (SCLK) и одновременно принимать данные от ведомых устройств. Комплементарный выходной каскад обеспечивает достаточный ток для быстрого переключения линии, особенно при наличии емкостной нагрузки, а также четкие уровни логического нуля и единицы для корректной синхронизации.

---

### 6. Изобразите и поясните протокол совершения записи в память емкостью 1Мбайт слов разрядностью 2 байта по интерфейсу I2C.

Не изобразил и не пояснил :disappointed_relieved:

---

### 7. Чему будет равна скорость передачи (операция записи) полезных данных по интерфейсу I2C при частоте сигнала синхронизации в 100 кГц? Ответ поясните.

При частоте сигнала синхронизации 100 кГц каждый бит передается за 10 мкс (1/100000 с).

Для операции записи 1 байта данных требуется:
1. Состояние СТАРТ: 1 бит
2. Адресный байт: 8 бит
3. ACK: 1 бит
4. Байт данных: 8 бит
5. ACK: 1 бит
6. Состояние СТОП: 1 бит

Всего: 20 бит для передачи 8 бит данных (1 байт).

Таким образом, скорость передачи полезных данных:
(8 бит / 20 бит) * 100 кГц = 40 кбит/с = 5 кБайт/с

---

### 8. Выберите комбинацию характеристик аппаратного интерфейса, который в большей степени ориентирован высокоскоростную передачу данных.

- [x] Синхронный
- [ ] Асинхронный
- [ ] Последовательный
- [x] Параллельный

Синхронный интерфейс - синхронизация обеспечивает надежную передачу данных на высоких скоростях, так как не требуется дополнительное время на синхронизацию старт-стоповыми битами. Параллельная передача данных - позволяет передавать несколько бит одновременно.

---

### 9. Контроллер какого интерфейса (последовательного или параллельного) имеет более сложную организацию. Ответ поясните.

Контроллер последовательного интерфейса имеет более сложную организацию, чем контроллер параллельного интерфейса.

Параллельный интерфейс не такой сложный, потому что каждый бит машинного слова отправляется по своей сигнальной линии, а в последовательном отправка данных происходит по одному биту за раз, что усложняет контроллер ввода-вывода. Контроллер передатчика получает машинное слово за раз и должен передавать по одному биту, а контроллер приёмника в свою очередь должен получать биты и сохранять в том же порядке.

---

### 10. Какие механизмы надежной передачи данных реализованы в интерфейсе RS-232?

В интерфейсе RS-232 реализованы следующие механизмы надежной передачи данных:

1. Контроль четности: Для обнаружения ошибок передачи используется бит четности, который проверяет количество единиц в передаваемом байте.
2. Старт-стоповые биты: Каждый байт данных обрамляется стартовым и стоповым битами, что позволяет синхронизировать передачу данных.
3. Аппаратный контроль потока данных с использованием линий RTS/CTS: Используется для управления потоком данных между устройствами, чтобы избежать переполнения буферов.
4. Линии статуса DSR/DTR (готовность приемника/готовность передатчика) для контроля состояния устройств.
5. Сигнальные линии CD и RI для обнаружения несущей и входящего вызова соответственно.
6. Настраиваемая длина стоп-бита: позволяет адаптироваться к различным устройствам и условиям передачи

Эти механизмы в совокупности обеспечивают надежную передачу данных по интерфейсу RS-232, несмотря на его относительно невысокую скорость.
