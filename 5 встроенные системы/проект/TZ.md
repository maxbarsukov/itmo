# Техническое задание на проект "Sleepy"

## Общие сведения

### 1. Цель проекта

Создание системы для анализа фаз сна человека на основе данных с акселерометра и гироскопа, находящихся между матрасом и простыней, работающее на платформе Raspberry Pi. Устройство фиксирует интенсивность и продолжительность движений во время сна, идентифицирует различные фазы сна и выбирает оптимальный момент для пробуждения, чтобы минимизировать стресс и повысить качество пробуждения.

### 2. Команда исполнителей

- Сиразетдинов Азат Ниязович
- Барсуков Максим Андреевич


## Технические требования

### 1. Требования к функциональным характеристикам

- Система должна собирать данные о движениях пользователя во время сна с использованием акселерометра и гироскопа.
- Система должна анализировать полученные данные для определения фаз сна: глубокий и легкий сон.
- Система должна уметь выбирать оптимальный момент для пробуждения пользователя в пределах заданного временного интервала, когда сон наиболее легкий.
- Система должна отображать и хранить данные о сне через подключенное программное обеспечение.
- У системы должны быть возможности настройки временных интервалов для пробуждения и индивидуальных предпочтений пользователей.
- Система должна предоставлять возможность интеграции в экосистему умного дома Яндекс.

### 2. Требования к надежности

- Система должна будить пользователя в конце временного интервала, если подходящий момент не был обнаружен.
- Устройство должно функционировать в течение всей ночи (не менее 12 часов) без перезагрузки и сбоев.
- Система должна сохранять корректность данных при длительном использовании устройства (до 14 часов непрерывной работы).
- В случае потери сигнала или временного сбоя система должна корректно возобновлять сбор данных после восстановления работы акселерометра и гироскопа или восстановления питания.

### 3. Условия эксплуатации

- Температурный диапазон работы устройства: от +5°C до +40°C.
- Допустимая влажность: от 20% до 80%.
- Устройство предназначено для использования в домашних условиях и должно быть компактным и безопасным для ночного использования рядом с человеком.
- Устройство получает питание по кабелю USB Type-C.

### 4. Требования к составу и параметрам технических средств

- **Платформа**: Raspberry Pi 3B и выше.
- **Акселерометр и гироскоп**: MPU-6050.
- **Программное обеспечение**:
  - Python3 для сбора и обработки данных.

### 5. Требования к информационной и программной совместимости

- Система должна работать под управлением Raspberry Pi OS
- Система должна взаимодействовать с акселерометром по протколу I2C (использование библиотеки для Python3)
- Система должна интегрироваться в систему Умный дом Яндекс


## Требования к документации

### 1. Состав программной документации:

- Файл README с описанием проекта, шагов запуска и зависимостей.
- Исходный код проекта с необходимыми комментариями, включая описание методов анализа данных о сне и алгоритмов пробуждения.
- Руководство пользователя с пошаговыми инструкциями.
- Техническое руководство по настройке и эксплуатации устройства.


## Технико-экономические показатели

- Ориентировочная стоимость единичного устройства:
  - Raspberry Pi 3B+: $60–80.
  - 4 датчика (гироскоп + акселерометр (по типу GY-421 MPU6050)): $3 * 4 = $12.
  - Прочие компоненты (питание, SD-карта, крепления): $20–30.
  - **Итоговая стоимость**: $90–130.
- Ориентировочная стоимость серийного выпуска: возможное снижение до $60–80 за единицу при тиражировании 1000 экземпляров.

## Стадии и этапы разработки

1. **Анализ и проектирование системы** (2 недели):

   - Анализ и выбор оборудования.
   - Первичное взаимодействие с платой Raspberry Pi 

2. **Разработка прототипа устройства** (2 недели):

   - Создание тестового стенда с подключенными акселерометрами
   - Сбор базовых показаний с акселерометров (2-3 цикла сна)
   - Написание кодовой базы
 
3. **Тестирование и отладка устройства** (2 недели):

   - Проверка работоспособности системы в различных условиях.

4. **Финальная приемка** (2 недели):
   - Финальная сборка устройства (возможно, с более подгодящими комплектующими).
   - Подготовка документации и демонстрация работы системы.

## Порядок контроля и приемки

1. **Виды испытаний**:
   - Тестирование функционала построения графика фаз сна и умного пробуждения.
   - Проверка точности будильника.
   - Сравнение полученных данных с посторонними приложениями (Zepp, Sleep as Android)
   - Испытания интеграции с экосистемой умного дома Яндекс
2. **Общие требования к приемке**:
   - Устройство должно построить корректную диаграмму фаз сна
   - Система должна вычислять время будильника в заданном промежутке для легкого пробуждения
   - Для взаимодействия с устройством можно будет использовать Яндекс Алису

## Ссылки на источники

1. ГОСТ 19.201-78 Техническое задание. Требования к содержанию и оформлению.
2. Руководство пользователя Raspberry Pi OS.
3. [Физиология сна](https://www.vsavm.by/wp-content/uploads/2013/11/Fiziologiya-sna.pdf)
4. [Двигательные расстройства во сне: современное состояние проблемы, К.Н. Стрыгин, Я.И. Левин. Первый МГМУ им. И.М. Сеченова](https://umedp.ru/articles/dvigatelnye_rasstroystva_vo_sne_sovremennoe_sostoyanie_problemy.html)
